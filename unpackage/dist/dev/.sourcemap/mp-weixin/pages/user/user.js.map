{"version":3,"sources":["webpack:///C:/bufanWorkSpace/乐居重构/pages/user/user.vue?0616","uni-app:///main.js","webpack:///C:/bufanWorkSpace/乐居重构/pages/user/user.vue?4763","webpack:///C:/bufanWorkSpace/乐居重构/pages/user/user.vue?b1dc","webpack:///C:/bufanWorkSpace/乐居重构/pages/user/user.vue?7543","webpack:///C:/bufanWorkSpace/乐居重构/pages/user/user.vue?01c4","uni-app:///pages/user/user.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,sxCAAwuC,eAAG,G;;;;;;;;wECA3uC,qBACA,sBACA,uC,mDACAA,EAAWC,a;;;;2DCHX,wSACIC,EADJ,kKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sBACZ,aAAAF,E;;;;2GCvBf,kmC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,ytBAAmqB,eAAG,G;;;;0ICuHtqB,uCAEA,GADA,mCACA,0C,gvBACA,CACA,mBACA,YACA,KAHA,WAIA,OACA,MACA,WAEA,YACA,WACA,8BACA,WACA,sCACA,kCACA,aAEA,CACA,OACA,mCACA,WAEA,CACA,0CACA,qCACA,aAEA,CACA,wBACA,qCACA,WAEA,CACA,OACA,kCACA,WAEA,CACA,0BACA,8BACA,eAeA,OAtDA,WAuDA,uBACA,aAEA,qBACA,mBAKA,SACA,MADA,WAEA,WACA,wBAEA,SACA,kBACA,oBAEA,aACA,GAKA,WACA,qFACA,aACA,oBAGA,yBAKA,WACA,yEACA,oBACA,eACA,kBAEA,sBASA,OAzCA,SAyCA,GAEA,sBACA,kBACA,GAFA,IAGA,oBAEA,2CAEA,iBACA,4CAIA,KAvDA,WAwDA,WACA,wCACA,MACA,2BACA,cAEA,QANA,SAMA,GACA,eACA,uBACA,aACA,aACA,cAGA,aACA,2CAMA,mBA7EA,SA6EA,GACA,WAMA,uBAEA,KAEA,yBAEA,cACA,UACA,QADA,SACA,GACA,YACA,+CACA,MACA,YACA,SAEA,QANA,SAMA,GAEA,0BACA,yBAEA,qBACA,aACA,0CACA,eACA,YACA,sBAQA,YArHA,WAsHA,4BACA,iCACA,qBACA,cACA,QAJA,SAIA,GACA,gBAEA,KAPA,SAOA,GACA,mBAIA,IAlIA,WAmIA,iBACA,6BAGA,YAvIA,WAwIA,WAEA,eACA,gBACA,QAFA,SAEA,GACA,+BACA,SACA,kBACA,QAFA,SAEA,GACA,eACA,kBACA,mBACA,aACA,QAJA,SAIA,GACA,0CACA,wCACA,sCAEA,KATA,SASA,GACA,aACA,iBACA,kBAKA,KApBA,SAoBA,GACA,oCACA,aACA,WACA,mCAQA,KA9KA,WA+KA,oCACA,eACA,iBAEA,WAnLA,SAmLA,KACA,EACA,cACA,QAGA,aACA,gCACA,sBAKA,aAhMA,WAiMA,cACA,2C","file":"pages/user/user.js","sourcesContent":["import mod from \"-!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=style&index=0&id=80842834&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=style&index=0&id=80842834&lang=scss&scoped=true&\"","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user/user.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user.vue?vue&type=template&id=80842834&scoped=true&\"\nvar renderjs\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user.vue?vue&type=style&index=0&id=80842834&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80842834\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/user.vue\"\nexport default component.exports","export * from \"-!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=template&id=80842834&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"mine-main\">\r\n\t\t<view class=\"head\">\r\n\t\t\t<view class=\"avatar-area\">\r\n\t\t\t\t<image class=\"avatar\" :src=\"userInfo.icon\" @tap=\"goUserCenter\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t<template v-if=\"userInfo.nickname\">\r\n\t\t\t\t\t\t<view class=\"nickname\">{{userInfo.nickname}}</view>\r\n\t\t\t\t\t\t<view class=\"username\">用户名: {{userInfo.username}}</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<view>Hi~</view>\r\n\t\t\t\t\t\t<view>您还没有登陆呢</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t\t\t<view @tap=\"getUserInfo\">点我获取个人微信头像及昵称</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <image class=\"icon-setting\" src=\"../../static/icons/setting.png\" mode=\"\" @tap=\"goSetting\"></image> -->\r\n\t\t</view>\r\n\t\t<view class=\"btns\" v-if=\"!userInfo.nickname\">\r\n\t\t\t<navigator url=\"login/register\" class=\"btn btn-reg\">注册</navigator>\r\n\t\t\t<navigator url=\"login/login\" class=\"btn btn-login\">登陆</navigator>\r\n\t\t</view>\r\n\t\t<!-- 我的订单 -->\r\n\t\t<view class=\"my-orders\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t我的订单\r\n\t\t\t</view>\r\n\t\t\t<view class=\"navs\">\r\n\t\t\t\t<!-- 订单状态  1 已付款 ;  2 已发货; 3: 已收货;   9 申请退款 -->\r\n\t\t\t\t<navigator class=\"nav-item\" url=\"/pages/order/order?type=0\">\r\n\t\t\t\t\t<image class=\"icon\" src=\"../../static/icons/icon-pay.png\"></image>\r\n\t\t\t\t\t<view class=\"text\">待付款</view>\r\n\t\t\t\t</navigator>\r\n\t\t\t\t<navigator class=\"nav-item\" url=\"/pages/order/order?type=1\">\r\n\t\t\t\t\t<image class=\"icon\" src=\"../../static/icons/pay-done.png\"></image>\r\n\t\t\t\t\t<view class=\"text\">已付款</view>\r\n\t\t\t\t</navigator>\r\n\t\t\t\t<navigator class=\"nav-item\" url=\"/pages/order/order?type=2\">\r\n\t\t\t\t\t<image class=\"icon\" src=\"../../static/icons/icon-car.png\"></image>\r\n\t\t\t\t\t<view class=\"text\">已发货</view>\r\n\t\t\t\t</navigator>\r\n\t\t\t\t<navigator class=\"nav-item\" url=\"/pages/order/order?type=3\">\r\n\t\t\t\t\t<image class=\"icon\" src=\"../../static/icons/icon-done.png\"></image>\r\n\t\t\t\t\t<view class=\"text\">已收货</view>\r\n\t\t\t\t</navigator>\r\n\t\t\t\t<navigator class=\"nav-item\" url=\"/pages/order/order?type=9\">\r\n\t\t\t\t\t<image class=\"icon\" src=\"../../static/icons/icon-back.png\"></image>\r\n\t\t\t\t\t<view class=\"text\">售后</view>\r\n\t\t\t\t</navigator>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"grid-block\">\r\n\t\t\t<view v-for=\"item in gridList\" class=\"uni-grid-item\" :key=\"item.text\">\r\n\t\t\t\t<view @tap=\"navigateTo(item.url,item.text)\">\r\n\t\t\t\t\t<image :src=\"item.img\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"text\">\r\n\t\t\t\t\t\t{{item.text}}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<view  class=\"uni-grid-item\" key=\"pay\">\r\n\t\t\t\t\r\n\t\t\t\t<view @tap=\"goPay\">\r\n\t\t\t\t\t<image src=\"../../static/icons/wxpay.png\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"text\">\r\n\t\t\t\t\t\t支付0.01元\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t\r\n\t\t\t<view  class=\"uni-grid-item\" key=\"tel\">\r\n\t\t\t\t\r\n\t\t\t\t<view @tap=\"tel\">\r\n\t\t\t\t\t<image src=\"../../static/icons/tel.png\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"text\">\r\n\t\t\t\t\t\t联系客服\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<!-- \t<view  class=\"uni-grid-item\" key=\"phone\">\r\n\t\t\t\t\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<image src=\"../../static/icons/call.png\" mode=\"\"></image>\r\n\t\t\t\t\t<button class=\"phoneBtn\" type=\"default\" open-type=\"getPhoneNumber\" @getphonenumber=\"decryptPhoneNumber\">获取手机号</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view  class=\"uni-grid-item\" key=\"phone\">\r\n\t\t\t\t\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<image src=\"../../static/icons/call.png\" mode=\"\"></image>\r\n\t\t\t\t\t<button class=\"phoneBtn\" @tap=\"save\">保存appid及appsecret</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t\t<!-- #endif -->\r\n\t\t\t\r\n\t\t\t<!-- <view  class=\"uni-grid-item\" key=\"tel\">\r\n\t\t\t\t\r\n\t\t\t\t<view @tap=\"fingerPrint\">\r\n\t\t\t\t\t<image src=\"../../static/icons/zhiwen.png\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"text\">\r\n\t\t\t\t\t\t指纹识别\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t\r\n\timport mix from \"@/mixins/index.js\"\r\n\timport user from \"@/api/user/index.js\"\r\n\timport WXBizDataCrypt from \"@/utils/WXBizDataCrypt.js\"\r\n\texport default {\r\n\t\tmixins:[mix],\r\n\t\tname: 'Mine',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tavatar: ''\r\n\t\t\t\t},\r\n\t\t\t\tuserInfo:{},\r\n\t\t\t\tisLogin:false,\r\n\t\t\t\tbaseUrl:\"http://bufantec.com\",\r\n\t\t\t\tgridList: [{\r\n\t\t\t\t\t\turl: '/pages/user/collected/collected',\r\n\t\t\t\t\t\timg: '../../static/icons/save.png',\r\n\t\t\t\t\t\ttext: '商品收藏'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: '',\r\n\t\t\t\t\t\timg: '../../static/icons/brand.png',\r\n\t\t\t\t\t\ttext: '品牌'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: '/pages/user/articleList/articleList',\r\n\t\t\t\t\t\timg: '../../static/icons/article.png',\r\n\t\t\t\t\t\ttext: '文章收藏'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: './address/address',\r\n\t\t\t\t\t\timg: '../../static/icons/address.png',\r\n\t\t\t\t\t\ttext: '地址'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: '',\r\n\t\t\t\t\t\timg: '../../static/icons/card.png',\r\n\t\t\t\t\t\ttext: '卡包'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: '/pages/user/car/car',\r\n\t\t\t\t\t\timg: '/static/icons/cart2.png',\r\n\t\t\t\t\t\ttext: '购物车'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \turl: '',\r\n\t\t\t\t\t// \timg: '../../static/icons/kf.png',\r\n\t\t\t\t\t// \ttext: '客服'\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \turl: '/pages/test/test',\r\n\t\t\t\t\t// \timg: '../../static/icons/kf.png',\r\n\t\t\t\t\t// \ttext: '测试'\r\n\t\t\t\t\t// }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tif(this.checkHasLogined()){\r\n\t\t\t\tthis.init();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(1111111)\r\n\t\t\t\tthis.userInfo =  {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoPay(){\r\n\t\t\t\t\tvar that = this;\r\n\t\t\t\t\tconst serverHost = 'https://bufan.cloud';\r\n\t\t\t\t\t// 1. 获取code\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t  provider: 'weixin',\r\n\t\t\t\t\t  success: function (loginRes) {\r\n\t\t\t\t\t\t// console.log(loginRes);\r\n\t\t\t\t\t\tvar code = loginRes.code;\r\n\t\t\t\t\t\tif(code){\r\n\t\t\t\t\t\t\t// 2. 给后台发送请求携带code,后台可以获取到openid\r\n\t\t\t\t\t\t\t// 接口: /wxlite/user/getUserInfo  \r\n\t\t\t\t\t\t\t\t// - 参数: appid\r\n\t\t\t\t\t\t\t\t// - 参数: code\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: `${serverHost}/wxlite/user/getUserInfo?appid=wx533999245c2a4823&code=${code}`,\r\n\t\t\t\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\t\t\t\tsuccess: function(res){\r\n\t\t\t\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\t\t\t\t// 拿到openid\r\n\t\t\t\t\t\t\t\t\tvar openid = res.data.data.openid;\r\n\t\t\t\t\t\t\t\t\t// 3. 发送支付请求,并携带openid  获取支付所需要的pre_payid 等一系列参数\r\n\t\t\t\t\t\t\t\t\t// 接口:  /wxlite/pay/orderPay\r\n\t\t\t\t\t\t\t\t\t\t// - 参数: openid\r\n\t\t\t\t\t\t\t\t\t\t// - 参数: total_fee    支付金额,单位分\r\n\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\turl: `${serverHost}/wxlite/pay/orderPay?openid=${openid}&total_fee=1`,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function(res){\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\tvar payOptions = res.data.data;\r\n\t\t\t\t\t\t\t\t\t\t\t// 4. 获取到相关参数 再调用uniapp的微信支付接口\r\n\t\t\t\t\t\t\t\t\t\t\tthat.uniPay(payOptions);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tuniPay(options){\r\n\t\t\t\t// 仅作为示例，非真实参数信息。\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t...options,\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t// 要求是 即使这里成功, 也要发送请求跟后台确认订单 如何确认跟后台约定\r\n\t\t\t\t\t\tconsole.log('success:' + JSON.stringify(res));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function (err) {\r\n\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsave(){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.baseUrl + \"/wx/liteDev/register\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tappId:\"wx533999245c2a4823\",\r\n\t\t\t\t\t\tappSecret:\"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif(res.data.code == \"success\"){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:\"保存成功\",\r\n\t\t\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:\"保存失败,请检查appid及appsecret是否正确!\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdecryptPhoneNumber(res){\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t// 注意  小程序的获取用户手机号属于敏感操作 不对个人开发者开放 \r\n\t\t\t\t// 获取到的数据是加密数据 如需查看原始手机号码 需要对数据进行解密操作 \r\n\t\t\t\t// 参考 https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95\r\n\t\t\t\t\r\n\t\t\t\t// 企业开发者appid\r\n\t\t\t\tvar appId = 'wx533999245c2a4823'\r\n\t\t\t\t// sessionKey 是登录时返回的sessionkey 参考小程序登录\r\n\t\t\t\tvar sessionKey = ''\r\n\t\t\t\t// 需要解密的数据\r\n\t\t\t\tvar encryptedData = res.detail.encryptedData\r\n\t\t\t\t// 加密算法的初始向量\r\n\t\t\t\tvar iv = res.detail.iv;\r\n\t\t\t\twx.login({\r\n\t\t\t\t\tsuccess(result) {\r\n\t\t\t\t\t\twx.request({\r\n\t\t\t\t\t\t\turl:_this.baseUrl+\"/admin/xy/lite/student/doLogin\",\r\n\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\tcode:result.code,\r\n\t\t\t\t\t\t\t\tappid:appId\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess(res1){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsessionKey = res1.data.data.session_key;\r\n\t\t\t\t\t\t\t\tvar pc = new WXBizDataCrypt(appId, sessionKey)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar data = pc.decryptData(encryptedData , iv)\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle:`获取到的手机号为\r\n\t\t\t\t\t\t\t\t\t${data.phoneNumber}`,\r\n\t\t\t\t\t\t\t\t\ticon:\"none\",\r\n\t\t\t\t\t\t\t\t\tduration:3000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// console.log('解密后 data: ', data)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfingerPrint(){\r\n\t\t\t\tuni.startSoterAuthentication({\r\n\t\t\t\t\trequestAuthModes:[\"fingerPrint\"],\r\n\t\t\t\t\tauthContent:\"测试指纹识别\",\r\n\t\t\t\t\tchallenge:\"1\",\r\n\t\t\t\t\tsuccess(res){\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttel(){\r\n\t\t\t\tuni.makePhoneCall({\r\n\t\t\t\t\tphoneNumber:\"18838180363\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserInfo(){\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t// uni.getProvider获取服务供应商。在App平台，可用的服务商，是打包环境中配置的服务商，与手机端是否安装了该服务商的App没有关系。\r\n\t\t\t\tuni.getProvider({\r\n\t\t\t\t\tservice:\"oauth\",\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif(res.provider.includes(\"weixin\")){ // 判断是否是微信\r\n\t\t\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\t\t\tprovider:\"weixin\",\r\n\t\t\t\t\t\t\t\tsuccess(result) { // 登录成功\r\n\t\t\t\t\t\t\t\t\tuni.getUserInfo({ // 获取个人信息\r\n\t\t\t\t\t\t\t\t\t\tprovider:\"weixin\",\r\n\t\t\t\t\t\t\t\t\t\twithCredentials:true, // 携带登录态信息\r\n\t\t\t\t\t\t\t\t\t\tlang:\"zh_CN\",\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res1) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"获取的个人信息为\",JSON.stringify(res1))\r\n\t\t\t\t\t\t\t\t\t\t\t_this.userInfo.nickname = res1.userInfo.nickName;\r\n\t\t\t\t\t\t\t\t\t\t\t_this.userInfo.icon = res1.userInfo.avatarUrl;\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail(res1) {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle:\"获取个人信息失败\",\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(result) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"失败\",JSON.stringify(result));\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle:\"失败\",\r\n\t\t\t\t\t\t\t\t\t\tcontent:JSON.stringify(result)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinit(){\r\n\t\t\t\tvar userData = uni.getStorageSync(\"leju_user\");\r\n\t\t\t\tconsole.log(userData)\r\n\t\t\t\tthis.userInfo = userData;\r\n\t\t\t},\r\n\t\t\tnavigateTo(url,text){\r\n\t\t\t\tif(url){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\timage:'/static/icons/sorry.png',\r\n\t\t\t\t\t\ttitle: text+'功能暂未开通 !'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t \r\n\t\t\t},\r\n\t\t\tgoUserCenter(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'./updateUserInfo/updateUserInfo'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.mine-main {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 0 40rpx;\r\n\r\n\t\t.head {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 150rpx;\r\n\t\t\tpadding-top: 60rpx;\r\n\r\n\t\t\t.avatar-area {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 150rpx;\r\n\t\t\t\t.avatar {\r\n\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\theight: 150rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tbackground-color: #C8C7CC;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.user-info {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tmargin-left: 32rpx;\r\n\t\t\t\t\theight: 150rpx;\r\n\t\t\t\t\tcolor: #3D4C46;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tjustify-content: space-around;\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\tpadding: 14rpx 0;\r\n\t\t\t\t\t.nickname{\r\n\t\t\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.username{\r\n\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.icon-setting {\r\n\t\t\t\twidth: 50rpx;\r\n\t\t\t\theight: 50rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.btns {\r\n\t\t\tmargin: 40rpx auto;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.btn {\r\n\t\t\t\twidth: 182rpx;\r\n\t\t\t\theight: 76rpx;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tborder: 1px solid #354E44;\r\n\t\t\t\tcolor: #354E44;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 76rpx;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\tmargin: 0 30rpx;\r\n\r\n\t\t\t\t&.btn-login {\r\n\t\t\t\t\tbackground-color: #354E44;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.my-orders {\r\n\t\t\twidth: 670rpx;\r\n\t\t\theight: 208rpx;\r\n\t\t\tborder-radius: 4rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tmargin-top: 60rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\theight: 76rpx;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tline-height: 76rpx;\r\n\t\t\t\tborder-bottom: 1px solid #ddd;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tmargin: 0 54rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.navs {\r\n\t\t\t\tpadding: 0 54rpx;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t.icon {\r\n\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tline-height: 37rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.grid-block {\r\n\t\t\twidth: 670rpx;\r\n\t\t\tmargin-top: 60rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tpadding: 30rpx 0 60rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\t\r\n\t\t\t.uni-grid-item {\r\n\t\t\t\twidth: 33.33%;\r\n\t\t\t\tmin-height: 200rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\timage {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\tmargin: 30rpx auto;\r\n\t\t\t\t}\r\n\t\t\t\t.phoneBtn{\r\n\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t    font-size: 26rpx;\r\n\t\t\t\t\tline-height: 1.2;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t.phoneBtn::after{\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t}\r\n\t\t\t\ttext {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tline-height: 38rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"sourceRoot":""}